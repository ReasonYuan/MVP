//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/liaomin/Documents/workspace/Android/DocPlusLogic/src/com/fq/halcyon/entity/CertificationStatus.java
//
//  Created by liaomin on 15-5-4.
//

#line 1 "/Users/liaomin/Documents/workspace/Android/DocPlusLogic/src/com/fq/halcyon/entity/CertificationStatus.java"

#include "ApiSystem.h"
#include "CertificationStatus.h"
#include "Constants.h"
#include "DoctorAuthLogic.h"
#include "FileSystem.h"
#include "JSONArray.h"
#include "JSONObject.h"
#include "Photo.h"
#include "PhotoRecord.h"
#include "User.h"
#include "java/io/File.h"
#include "java/lang/Exception.h"
#include "java/util/ArrayList.h"


#line 15
@implementation ComFqHalcyonEntityCertificationStatus

ComFqHalcyonEntityCertificationStatus * ComFqHalcyonEntityCertificationStatus__instance_;


#line 53
- (void)clear {
  
#line 54
  ComFqHalcyonEntityCertificationStatus__instance_ = nil;
}


#line 57
+ (void)initCertification {
  
#line 58
  [ComFqHalcyonEntityCertificationStatus initDoctorAuth2Net];
}


#line 72
+ (ComFqHalcyonEntityCertificationStatus *)getInstance {
  
#line 73
  if (ComFqHalcyonEntityCertificationStatus__instance_ == nil) {
    ComFqHalcyonEntityCertificationStatus__instance_ = [[ComFqHalcyonEntityCertificationStatus alloc] init];
  }
  return ComFqHalcyonEntityCertificationStatus__instance_;
}


#line 80
+ (void)initDoctorAuth2Net {
  [((ComFqHalcyonLogicDoctorAuthLogic *) [[ComFqHalcyonLogicDoctorAuthLogic alloc] init]) requestAuthStateWithComFqHalcyonLogicDoctorAuthLogic_OnRequestAuthStateCallback:[[ComFqHalcyonEntityCertificationStatus_$1 alloc] init]];
}


#line 118
+ (ComFqHalcyonEntityCertificationStatus *)initByJsonWithFQJSONObject:(FQJSONObject *)json {
  
#line 119
  @try {
    ComFqHalcyonEntityCertificationStatus *certif = [[ComFqHalcyonEntityCertificationStatus alloc] init];
    
#line 122
    int state = 0;
    if ([((ComFqHalcyonEntityUser *) nil_chk([ComFqLibToolsConstants getUser])) getRole_type] == ComFqLibToolsConstants_ROLE_DOCTOR) {
      state = [((FQJSONObject *) nil_chk(json)) optIntWithNSString:@"auth_status"];
    }
    else
#line 125
    if ([((ComFqHalcyonEntityUser *) nil_chk([ComFqLibToolsConstants getUser])) getRole_type] == ComFqLibToolsConstants_ROLE_DOCTOR_STUDENT) {
      state = [((FQJSONObject *) nil_chk(json)) optIntWithNSString:@"auth_student_status"];
    }
    certif->auth_status_ = state == ComFqHalcyonEntityCertificationStatus_CERTIFICATION_WAIT ? ComFqHalcyonEntityCertificationStatus_CERTIFICATION_APPROVING : state;
    FQJSONArray *array = [((FQJSONObject *) nil_chk(json)) optJSONArrayWithNSString:@"certi_list"];
    certif->authImages_ = [[JavaUtilArrayList alloc] init];
    if (certif->auth_status_ != ComFqHalcyonEntityCertificationStatus_CERTIFICATION_INITIALIZE) certif->isHaveApply_ = YES;
    if (!certif->isHaveApply_ && [((FQJSONArray *) nil_chk(array)) length] > 0) certif->isHaveApply_ = YES;
    for (int i = 0; i < [((FQJSONArray *) nil_chk(array)) length]; i++) {
      FQJSONObject *obj = [array optJSONObjectWithInt:i];
      
#line 136
      int docerId = [((FQJSONObject *) nil_chk(obj)) optIntWithNSString:@"doctor_certi_id"];
      ComFqHalcyonEntityPhotoRecord *img = [[ComFqHalcyonEntityPhotoRecord alloc] initWithInt:[obj optIntWithNSString:@"image_id"] withNSString:[obj optStringWithNSString:@"uri"]];
      ComFqHalcyonEntityCertificationStatus_AuthImage *authImg = [[ComFqHalcyonEntityCertificationStatus_AuthImage alloc] initWithInt:docerId withInt:[obj optIntWithNSString:@"certi_type"] withComFqHalcyonEntityPhotoRecord:img];
      [certif->authImages_ addWithId:authImg];
    }
    return certif;
  }
  @catch (
#line 142
  JavaLangException *e) {
    return nil;
  }
}


#line 147
- (BOOL)isHaveAuth {
  
#line 148
  return isHaveApply_;
}


#line 151
- (void)setHaveAuthWithBoolean:(BOOL)isb {
  
#line 152
  isHaveApply_ = isb;
}


#line 155
- (void)setStateWithInt:(int)type {
  
#line 156
  auth_status_ = type;
}


#line 159
- (int)getState {
  
#line 160
  return auth_status_;
}


#line 163
- (int)getId {
  
#line 164
  return certi_id_;
}


#line 167
- (JavaUtilArrayList *)getImgs {
  
#line 168
  if (authImages_ == nil) authImages_ = [[JavaUtilArrayList alloc] init];
  return authImages_;
}


#line 172
- (ComFqHalcyonEntityCertificationStatus_AuthImage *)getAuthImageByTypeWithInt:(int)type {
  
#line 173
  if (authImages_ == nil || [authImages_ size] == 0) return nil;
  for (int i = 0; i < [((JavaUtilArrayList *) nil_chk(authImages_)) size]; i++) {
    ComFqHalcyonEntityCertificationStatus_AuthImage *img = [authImages_ getWithInt:i];
    if (((ComFqHalcyonEntityCertificationStatus_AuthImage *) nil_chk(img))->certType_ == type && img->doctorCertiId_ != 0 && [((ComFqHalcyonEntityPhotoRecord *) nil_chk(img->hayImage_)) getImageId] != 0) {
      return img;
    }
  }
  return nil;
}


#line 183
- (BOOL)isImgExitByTypeWithInt:(int)type {
  
#line 184
  NSString *imgName = [((ComFqHalcyonExtendFilesystemFileSystem *) nil_chk([ComFqHalcyonExtendFilesystemFileSystem getInstance])) getAuthImgPathByTypeWithInt:type];
  JavaIoFile *file = [[JavaIoFile alloc] initWithNSString:imgName];
  return [file exists];
}


#line 193
- (NSString *)getStateStrWithBoolean:(BOOL)isHead {
  
#line 194
  switch (auth_status_) {
    case ComFqHalcyonEntityCertificationStatus_CERTIFICATION_INITIALIZE:
    return isHead ? @"\u521d\u59cb" : @"";
    case ComFqHalcyonEntityCertificationStatus_CERTIFICATION_APPROVING:
    return @"\u5ba1\u6838\u4e2d";
    case ComFqHalcyonEntityCertificationStatus_CERTIFICATION_NOT_PASS:
    return @"\u672a\u901a\u8fc7";
    case ComFqHalcyonEntityCertificationStatus_CERTIFICATION_PASS:
    return @"\u901a\u8fc7";
    default:
    return @"";
  }
}


#line 225
- (void)test {
}


#line 231
- (void)setAtttributeByjsonWithFQJSONObject:(FQJSONObject *)json {
  
#line 232
  self->auth_status_ = [((FQJSONObject *) nil_chk(json)) optIntWithNSString:@"auth_status"];
  self->certi_id_ = [json optIntWithNSString:@"certi_id"];
  FQJSONArray *authImagesaArray = [json optJSONArrayWithNSString:@"authImages"];
  if (authImagesaArray != nil) {
  }
}

- (id)init {
  if (self = [super init]) {
    auth_status_ =
#line 43
    ComFqHalcyonEntityCertificationStatus_CERTIFICATION_INITIALIZE;
  }
  return self;
}

- (void)copyAllFieldsTo:(ComFqHalcyonEntityCertificationStatus *)other {
  [super copyAllFieldsTo:other];
  other->authImages_ = authImages_;
  other->auth_status_ = auth_status_;
  other->certi_id_ = certi_id_;
  other->isHaveApply_ = isHaveApply_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "clear", NULL, "V", 0x1, NULL },
    { "initCertification", NULL, "V", 0x9, NULL },
    { "getInstance", NULL, "Lcom.fq.halcyon.entity.CertificationStatus;", 0x9, NULL },
    { "initDoctorAuth2Net", NULL, "V", 0x9, NULL },
    { "initByJsonWithFQJSONObject:", "initByJson", "Lcom.fq.halcyon.entity.CertificationStatus;", 0x9, NULL },
    { "isHaveAuth", NULL, "Z", 0x1, NULL },
    { "setHaveAuthWithBoolean:", "setHaveAuth", "V", 0x1, NULL },
    { "setStateWithInt:", "setState", "V", 0x1, NULL },
    { "getState", NULL, "I", 0x1, NULL },
    { "getId", NULL, "I", 0x1, NULL },
    { "getImgs", NULL, "Ljava.util.ArrayList;", 0x1, NULL },
    { "getAuthImageByTypeWithInt:", "getAuthImageByType", "Lcom.fq.halcyon.entity.CertificationStatus$AuthImage;", 0x1, NULL },
    { "isImgExitByTypeWithInt:", "isImgExitByType", "Z", 0x1, NULL },
    { "getStateStrWithBoolean:", "getStateStr", "Ljava.lang.String;", 0x1, NULL },
    { "test", NULL, "V", 0x1, NULL },
    { "setAtttributeByjsonWithFQJSONObject:", "setAtttributeByjson", "V", 0x1, NULL },
    { "init", NULL, NULL, 0x1, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "serialVersionUID_CertificationStatus_", "serialVersionUID", 0x1a, "J", NULL, .constantValue.asLong = ComFqHalcyonEntityCertificationStatus_serialVersionUID },
    { "CERTIFICATION_INITIALIZE_", NULL, 0x19, "I", NULL, .constantValue.asInt = ComFqHalcyonEntityCertificationStatus_CERTIFICATION_INITIALIZE },
    { "CERTIFICATION_APPROVING_", NULL, 0x19, "I", NULL, .constantValue.asInt = ComFqHalcyonEntityCertificationStatus_CERTIFICATION_APPROVING },
    { "CERTIFICATION_NOT_PASS_", NULL, 0x19, "I", NULL, .constantValue.asInt = ComFqHalcyonEntityCertificationStatus_CERTIFICATION_NOT_PASS },
    { "CERTIFICATION_PASS_", NULL, 0x19, "I", NULL, .constantValue.asInt = ComFqHalcyonEntityCertificationStatus_CERTIFICATION_PASS },
    { "CERTIFICATION_WAIT_", NULL, 0x19, "I", NULL, .constantValue.asInt = ComFqHalcyonEntityCertificationStatus_CERTIFICATION_WAIT },
    { "auth_status_", NULL, 0x2, "I", NULL,  },
    { "certi_id_", NULL, 0x2, "I", NULL,  },
    { "authImages_", NULL, 0x2, "Ljava.util.ArrayList;", NULL,  },
    { "isHaveApply_", NULL, 0x2, "Z", NULL,  },
    { "_instance_", NULL, 0xa, "Lcom.fq.halcyon.entity.CertificationStatus;", &ComFqHalcyonEntityCertificationStatus__instance_,  },
  };
  static J2ObjcClassInfo _ComFqHalcyonEntityCertificationStatus = { "CertificationStatus", "com.fq.halcyon.entity", NULL, 0x1, 17, methods, 11, fields, 0, NULL};
  return &_ComFqHalcyonEntityCertificationStatus;
}

@end


#line 208
@implementation ComFqHalcyonEntityCertificationStatus_AuthImage


#line 217
- (id)initWithInt:(int)docCerId
          withInt:(int)type
withComFqHalcyonEntityPhotoRecord:(ComFqHalcyonEntityPhotoRecord *)img {
  if (self = [super init]) {
    
#line 218
    doctorCertiId_ = docCerId;
    
#line 219
    certType_ = type;
    
#line 220
    hayImage_ = img;
  }
  return self;
}

- (void)copyAllFieldsTo:(ComFqHalcyonEntityCertificationStatus_AuthImage *)other {
  [super copyAllFieldsTo:other];
  other->certType_ = certType_;
  other->doctorCertiId_ = doctorCertiId_;
  other->hayImage_ = hayImage_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "initWithInt:withInt:withComFqHalcyonEntityPhotoRecord:", "AuthImage", NULL, 0x1, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "CERTYPE_DOCTOR_", NULL, 0x19, "I", NULL, .constantValue.asInt = ComFqHalcyonEntityCertificationStatus_AuthImage_CERTYPE_DOCTOR },
    { "CERTYPE_CARD_Z_", NULL, 0x19, "I", NULL, .constantValue.asInt = ComFqHalcyonEntityCertificationStatus_AuthImage_CERTYPE_CARD_Z },
    { "CERTYPE_CARD_F_", NULL, 0x19, "I", NULL, .constantValue.asInt = ComFqHalcyonEntityCertificationStatus_AuthImage_CERTYPE_CARD_F },
    { "certType_", NULL, 0x1, "I", NULL,  },
    { "doctorCertiId_", NULL, 0x1, "I", NULL,  },
    { "hayImage_", NULL, 0x1, "Lcom.fq.halcyon.entity.PhotoRecord;", NULL,  },
  };
  static J2ObjcClassInfo _ComFqHalcyonEntityCertificationStatus_AuthImage = { "AuthImage", "com.fq.halcyon.entity", "CertificationStatus", 0x9, 1, methods, 6, fields, 0, NULL};
  return &_ComFqHalcyonEntityCertificationStatus_AuthImage;
}

@end

@implementation ComFqHalcyonEntityCertificationStatus_$1


#line 82
- (void)feedRequestWithComFqHalcyonEntityCertificationStatus:(ComFqHalcyonEntityCertificationStatus *)certif {
  
#line 83
  (void) ComFqHalcyonEntityCertificationStatus_set__instance_(certif);
  if (ComFqHalcyonEntityCertificationStatus_get__instance_() != nil) {
    ComFqHalcyonExtendFilesystemFileSystem *filSys = [ComFqHalcyonExtendFilesystemFileSystem getInstance];
    NSString *path = [((ComFqHalcyonExtendFilesystemFileSystem *) nil_chk(filSys)) getRecordImgPath];
    
#line 88
    for (int i = 1; i < 2; i++) {
      JavaIoFile *file = [[JavaIoFile alloc] initWithNSString:path];
      if (![file exists]) [file mkdirs];
      NSString *name = [filSys getAuthImgNameByTypeWithInt:i];
      file = [[JavaIoFile alloc] initWithNSString:[NSString stringWithFormat:@"%@/%@", path, name]];
      if ([file exists]) continue;
      ComFqHalcyonEntityCertificationStatus_AuthImage *img = [ComFqHalcyonEntityCertificationStatus_get__instance_() getAuthImageByTypeWithInt:i];
      if (img != nil && [((ComFqHalcyonEntityPhotoRecord *) nil_chk(img->hayImage_)) getImageId] != 0) {
        int imageId = [img->hayImage_ getImageId];
        
#line 100
        ComFqHalcyonEntityPhoto *photo = [[ComFqHalcyonEntityPhoto alloc] init];
        [photo setImageIdWithInt:imageId];
        [photo setImagePathWithNSString:[((ComFqHalcyonExtendFilesystemFileSystem *) nil_chk([ComFqHalcyonExtendFilesystemFileSystem getInstance])) getAuthImgPathByTypeWithInt:i]];
        [((ComFqHalcyonApiApiSystem *) nil_chk([ComFqHalcyonApiApiSystem getInstance])) getHeadImageWithComFqHalcyonEntityPhoto:photo withComFqLibCallbackICallback:[[ComFqHalcyonEntityCertificationStatus_$1_$1 alloc] init] withBoolean:
#line 110
        NO withInt:4];
      }
    }
  }
}

- (id)init {
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "feedRequestWithComFqHalcyonEntityCertificationStatus:", "feedRequest", "V", 0x1, NULL },
    { "init", NULL, NULL, 0x0, NULL },
  };
  static J2ObjcClassInfo _ComFqHalcyonEntityCertificationStatus_$1 = { "$1", "com.fq.halcyon.entity", "CertificationStatus", 0x8000, 2, methods, 0, NULL, 0, NULL};
  return &_ComFqHalcyonEntityCertificationStatus_$1;
}

@end

@implementation ComFqHalcyonEntityCertificationStatus_$1_$1


#line 106
- (void)doCallbackWithId:(id)obj {
}

- (id)init {
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "doCallbackWithId:", "doCallback", "V", 0x1, NULL },
    { "init", NULL, NULL, 0x0, NULL },
  };
  static J2ObjcClassInfo _ComFqHalcyonEntityCertificationStatus_$1_$1 = { "$1", "com.fq.halcyon.entity", "CertificationStatus$$1", 0x8000, 2, methods, 0, NULL, 0, NULL};
  return &_ComFqHalcyonEntityCertificationStatus_$1_$1;
}

@end
